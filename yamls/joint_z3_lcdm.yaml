theory:
  joint_likelihood_gc_emu_lnA.Taylor_pk_theory_zs:
      zfids:
      - 0.61
      pk_filenames:
      - /global/cscratch1/sd/sfschen/finite_difference/emu/boss_z_0.61_pkells.json
      xi_filenames:
      - /global/cscratch1/sd/sfschen/finite_difference/emu/boss_z_0.61_xiells.json
      stop_at_error: True
      
likelihood:
  joint_boss_likelihoods_emu_lnA.FullShapePlusBAOEmu_Z3:
    fs_kmins:
    - 0.02
    - 0.02
    fs_mmaxs:
    - 0.20
    - 0.20
    fs_qmaxs:
    - 0.20
    - 0.20
    bao_rmins:
    - 80.
    bao_rmaxs:
    - 130.
    stop_at_error: True

  gxk_likelihood.GxKLikelihood:
    model:  clpt
    clsfn:  /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_z061_cls.txt
    covfn:  /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_z061_cov.txt
    EmuPT:  /global/cscratch1/sd/sfschen/BOSSxPlanck/emulator/emu/preal.json
    EmuHF:  /global/cscratch1/sd/sfschen/BOSSxPlanck/emulator/emu/phalofit.json
    EmuLS:  /global/cscratch1/sd/sfschen/BOSSxPlanck/emulator/emu/chi_ls.json
    zeff:
         -  0.61
         -  0.61
    suffx:
         -  NGCz3
         -  SGCz3
    dndzfn:
         - /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_s13_dndz.txt
         -  /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_s23_dndz.txt
    wlafn:
         -  /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_s13_wla.txt
         -  /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_s23_wla.txt
    wlxfn:
         -  /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_s13_wlx.txt
         -  /global/cscratch1/sd/sfschen/BOSSxPlanck/data/gal_s23_wlx.txt
    acut:
        -   0
        -   0
    xcut:
        -   350
        -   350
    stop_at_error: True
  #sn.pantheon: null
  #bao.sixdf_2011_bao: null
  #bao.sdss_dr7_mgs: null
  #bao.sdss_dr12_consensus_bao: null


params:
  H0:
    prior:
      min: 60.0
      max: 80.0
    ref:
      dist: norm
      loc:  69.74141
      scale: 1.0
    latex: H_0
  omegam:
    prior:
      min: 0.2
      max: 0.4
    ref:
      dist: norm
      loc: 0.30337734
      scale: 0.05
    latex: \Omega_\mathrm{m}
  logA:
    prior:
      dist: uniform
      min:  1.61
      max:  3.91
    ref:
      dist:  norm
      loc:   2.8531776
      scale: 0.05
    latex: \log(10^{10} A_\mathrm{s})
  sigma8:
    latex: \sigma_8
    
  # NGCz3
  b1_NGCz3:
    prior:
      dist: uniform
      min:  0.0
      max:  3.0
    ref:
      dist:  norm
      loc:   1.205
      scale: 0.05
    latex: b_1^{N3}
  b2_NGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 5.
    ref:
      dist:  norm
      loc:   -0.28
      scale: 0.1
    latex: b_2^{N3}
  bs_NGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 5.0
    ref:
      dist:  norm
      loc:   2.8
      scale: 0.1
    latex: b_s^{N3}
  alpha0_NGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 100.
    ref:
      dist:  norm
      loc:   21.0
      scale: 0.5
    latex: \alpha_0^{N3}
  alpha2_NGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 100.
    ref:
      dist:  norm
      loc:   -16.0
      scale: 0.5
    latex: \alpha_2^{N3}
  SN0_NGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 1000.
    ref:
      dist:  norm
      loc:   -1254.9222
      scale: 100.
    latex: SN_0^{N3}
  SN2_NGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 5e4
    ref:
      dist:  norm
      loc:   -6126.9357
      scale:  1e3
    latex: SN_2^{N3}
    
  # Extra variables needed for the lensing
  bn_NGCz3:
    value: 0.0
  alpha_a_NGCz3:
    value: 0.0
    latex: \alpha_{a}^{N3}
  alpha_x_NGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 50.
    ref:
      dist:  norm
      loc:   0.0
      scale: 5.0
    latex: \alpha_{\times}^{N3}
  SN_NGCz3:
    value: 0.0
    latex: SN^{N3}
  smag_NGCz3:
    prior:
      dist: norm
      loc:   1.05
      scale: 0.11
    ref:
      dist:  norm
      loc:   1.05
      scale: 0.11
    latex: s_{\mu}^{N3}

  # SGCz3
  b1_SGCz3:
    prior:
      dist: uniform
      min:  0.0
      max:  3.0
    ref:
      dist:  norm
      loc:   1.18
      scale: 0.05
    latex: b_1^{S3}
  b2_SGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 5.0
    ref:
      dist:  norm
      loc:   -1.5244953
      scale: 0.1
    latex: b_2^{S3}
  bs_SGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 5.0
    ref:
      dist:  norm
      loc:   -0.94129379
      scale: 0.1
    latex: b_s^{S3}
  alpha0_SGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 100.
    ref:
      dist:  norm
      loc:   -3.0622123 
      scale: 0.5
    latex: \alpha_0^{S3}
  alpha2_SGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 100.
    ref:
      dist:  norm
      loc:   18.192756
      scale: 0.5
    latex: \alpha_2^{S3}
  SN0_SGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 1000.
    ref:
      dist:  norm
      loc:   69.623293
      scale: 100.
    latex: SN_0^{S3}
  SN2_SGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 5e4
    ref:
      dist:  norm
      loc:   -45824.588
      scale:  1e3
    latex: SN_2^{S3}
    
  # Extra variables needed for the lensing
  bn_SGCz3:
    value: 0.0
  alpha_a_SGCz3:
    value: 0.0
    latex: \alpha_{a}^{S3}
  alpha_x_SGCz3:
    prior:
      dist:  norm
      loc:   0.0
      scale: 50.
    ref:
      dist:  norm
      loc:   0.0
      scale: 5.0
    latex: \alpha_{\times}^{S3}
  SN_SGCz3:
    value: 0.0
    latex: SN^{N3}
  smag_SGCz3:
    prior:
      dist: norm
      loc:   1.05
      scale: 0.11
    ref:
      dist:  norm
      loc:   1.05
      scale: 0.11
    latex: s_{\mu}^{S3}
 
    
  # Post-recon parameters
  B1_z3:
    prior:
      dist: uniform
      min: 0.0
      max: 5.0
    ref:
      dist: norm
      loc: 1.1659447
      scale: 0.1
    latex: B_1^{z3}
  F_z3:
    prior:
      dist: uniform
      min: 0.0
      max: 5.0
    ref:
      dist: norm
      loc: 0.91452773
      scale: 0.1
    latex: F^{z3}
  # For these priors we take the philosophy that rba0^2 (a0 + a1/rbao) <~ <rbao^2 xi> ~ 50
  # i.e. a0 <~ 5e-3, a2 <~ 5e-1, and we enforce a 10x wide Gaussian prior on this estimation
  M0_z3:
    prior:
      dist: norm
      loc: 0.
      scale: 5e-2
    ref:
      dist: norm
      loc: 0.001644264
      scale: 0.001
    latex: M_0^{z3}
  M1_z3:
    prior:
      dist: norm
      loc: 0.
      scale: 5.
    ref:
      dist: norm
      loc: -0.031248777
      scale: 0.1
    latex: M_1^{z3}
  M2_z3:
    value: 0.
  Q0_z3:
    prior:
      dist: norm
      loc: 0.
      scale: 5e-2
    ref:
      dist: norm
      loc: -0.0035313207
      scale: 0.001
    latex: Q_0^{z3}
  Q1_z3:
    prior:
      dist: norm
      loc: 0.
      scale: 5.
    ref:
      dist: norm
      loc: 0.60734289
      scale: 0.1
    latex: Q_1^{z3}
  Q2_z3:
    value: 0.



sampler:
  mcmc:
    #covmat: auto
    learn_proposal: True
    learn_proposal_Rminus1_max: 30.
    output_every: 60s
    measure_speeds: True
    max_tries: 500
    oversample_power: 0.4
    proposal_scale: 1.5
    Rminus1_stop: 0.01
output: chains/bossz3_joint
timing: True
stop_on_error: True
